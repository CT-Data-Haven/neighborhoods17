{"version":3,"sources":["img/25th-logotype.jpg","App.js","components/Filters.jsx","components/utils.js","components/BarChart.jsx","components/Legend.jsx","components/MapContainer.jsx","components/VizStage.jsx","components/Viz.jsx","components/Profile.jsx","components/DataTable.jsx","components/Intro.jsx","components/Download.jsx","components/Footer.jsx","data/routes.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","topic","Filters","props","topics","_","meta","values","map","flattenDeep","d","i","uniqBy","value","key","text","displayTopic","indicators","indicator","displayIndicator","cities","id","title","react_default","a","createElement","className","Form","Group","widths","Select","name","options","city","onChange","label","sort","b","cleanVal","fmt","format","colorNhood","nhood","scale","geoType","BarChart","axis","tickFormat","ticks","padding","lib","data","indicatorData","size","width","height","responsiveWidth","responsiveHeight","oAccessor","x","length","substring","trunc","rAccessor","type","projection","rExtent","undefined","margin","left","top","right","bottom","sortO","style","opacity","color","fill","colorscale","oPadding","oLabel","tooltipContent","tooltip","pieces","hoverAnnotation","customClickBehavior","handleBar","Legend","vx_legend_es","labelFormat","Overlay","LayersControl","cityStyle","fillColor","weight","pointerEvents","MapContainer","getStyle","feature","properties","_this","mapData","fillOpacity","onEachFeature","layer","on","onClick","addHilite","removeHilite","bindTooltip","val","concat","direction","offset","e","target","setStyle","geo","topojson","_this2","this","layers","shapes","shp","objects","mesh","town","merge","geometries","checked","LayerGroup","GeoJSON","interactive","Map","bounds","getBounds","zoomSnap","zoomDelta","scrollWheelZoom","TileLayer","url","attribution","subdomains","minZoom","maxZoom","ext","components_Legend","React","Component","ChartComponent","componentFromProp","chartHash","bar","VizHeader","_ref","year","Header","as","VizStage","VizStage_VizHeader","Object","assign","component","Viz","panes","menuItem","icon","content","render","Tab","Pane","components_VizStage","handleShape","mapColors","barColors","menu","secondary","pointing","Profile","rows","omit","topicMeta","Table","Row","Cell","textAlign","warning","attached","definition","compact","unstackable","Body","DataTable","header","isAscending","otherHeaders","toConsumableArray","HeaderCell","handleSort","sorted","sortCol","handleClick","active","v","j","align","fixed","selectable","sortable","celled","Intro","Message","href","Download","Footer","Segment","basic","List","bulleted","sources","Item","source","project","components_Download","Image","src","alt","routes","new_haven","require","bridgeport","hartford","stamford","palette","schemeGnBu","barscheme","metaLong","citiesIdx","firstNeighborhood","initData","filter","first","fetchIndicators","toArray","reset","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleSelect","setState","state","_this$state","opts","update","objectSpread","defineProperty","_ref2","column","handleRowClick","handleTableSort","topicData","fetch","_this$state2","fetchData","_ref3","fetched","metaVals","find","flatMap","sortBy","byIndicator","keyBy","vals","brks","ckmeans","slice","scaleThreshold","domain","range","geos","scaleOrdinal","table","profile","toIndicator","toMap","makeMapScale","makeBarScale","indicatorMeta","role","Grid","container","stackable","Icon","components_Intro","Column","components_Filters","components_Viz","components_Profile","components_DataTable","reverse","components_Footer","Boolean","window","location","hostname","match","ReactDOM","App_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b92235c4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/25th-logotype.98a5f80e.jpg\";","import React from 'react';\nimport { Grid, Header, Icon } from 'semantic-ui-react';\nimport { scaleThreshold, scaleOrdinal } from 'd3-scale';\nimport { schemeGnBu } from 'd3-scale-chromatic';\nimport { ckmeans } from 'simple-statistics';\nimport * as _ from 'lodash';\n\nimport Filters from './components/Filters';\nimport Viz from './components/Viz';\nimport Profile from './components/Profile';\nimport DataTable from './components/DataTable';\nimport Intro from './components/Intro';\nimport Footer from './components/Footer';\n\nimport './App.css';\n\nimport cities from './data/routes.js';\nimport metaLong from './data/nhood_meta.json';\nimport initData from './data/nhood_acs_health_wide.json';\nimport sources from './data/sources.json';\n\nconst shapes = {\n  new_haven: require('./shapes/new_haven_topo.json'),\n  bridgeport: require('./shapes/bridgeport_topo.json'),\n  hartford: require('./shapes/hartford_topo.json'),\n  stamford: require('./shapes/stamford_topo.json')\n};\n\nconst nBrks = 5;\nconst palette = schemeGnBu[nBrks];\nconst barscheme = [ '#3fa0e0', '#8f8f8f', '#8f8f8f', '#8f8f8f' ];\n// const year = 2017;\n\nconst meta = _.groupBy(metaLong, 'topic');\nconst citiesIdx = _.keyBy(cities, 'id');\n\n// FUNCTIONS\nconst firstNeighborhood = (city) => (\n  _.chain(initData[city][0].data)\n    .filter({ geoType: '1_neighborhood'})\n    .map('name')\n    .first()\n    .value()\n);\n\nconst fetchIndicators = (topic) => (\n  _.chain(meta[topic])\n    .toArray()\n    .filter({ type: 'map' })\n    .value()\n);\n\nconst firstIndicator = (topic) => (\n  fetchIndicators(topic)[0].indicator\n);\n\nconst reset = {\n  city: cities[0].id,\n  nhood: firstNeighborhood(cities[0].id),\n  topic: _.keys(meta)[0],\n  indicator: firstIndicator(_.keys(meta)[0])\n};\n\nexport default class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      topicData: [],\n      fetch: [],\n      isAscending: true,\n      sortCol: 'name',\n      ...reset\n    };\n  }\n\n  componentDidMount() {\n    let { city, topic, indicator } = this.state;\n    let opts = { city, topic, indicator };\n    this.update({ ...opts });\n  }\n\n  update(opts) {\n    let fetch = this.fetchData(opts);\n\n    this.setState({\n      indicator: opts.indicator,\n      fetch,\n      // topicData\n    });\n  }\n\n  fetchData({ city, topic }) {\n    return _.find(initData[city], { topic: topic });\n  }\n\n  // takes fetch\n  toTopic(fetched, topic) {\n    let out = _.map(fetched, (d, i) => {\n        let metaVals = _.chain(meta[topic]).find({ indicator: d.indicator }).omit([ 'order', 'suborder' ]).value();\n        return ({ ...metaVals, ...d });\n      });\n    return out;\n  }\n\n  // takes fetch\n  toIndicator(fetched, indicator) {\n    return _.chain(fetched.data)\n      .flatMap((d, i) => ({\n        name: d.name,\n        geoType: d.geoType,\n        value: d[indicator]\n      }))\n      .sortBy('value')\n      .value();\n  }\n\n  // takes indicatorData\n  toMap(byIndicator) {\n    return _.chain(byIndicator)\n      .filter({ geoType: '1_neighborhood' })\n      .keyBy('name')\n      .value();\n  }\n\n\n  ///////// scales\n  makeMapScale(data) {\n    let vals = _.map(data, 'value').sort((a, b) => a - b);\n    if (!vals.length) {\n      return scaleThreshold().domain([0, 1]).range(['#ccc']);\n    } else {\n      let brks = ckmeans(vals, nBrks).map((d) => d[0]).slice(1);\n      return scaleThreshold()\n        .domain(brks)\n        .range(palette);\n    }\n  }\n\n  makeBarScale(data) {\n    let geos = _.map(data, 'geoType').sort();\n    return scaleOrdinal()\n      .domain(geos)\n      .range(barscheme);\n  }\n\n  ////////// event handlers\n  handleSelect = (e, { name, value }) => {\n    if (name === 'city') {\n      this.setState({\n        nhood: firstNeighborhood(value),\n        city: value\n      });\n    }\n    let indicator = name === 'topic' ? fetchIndicators(value)[0].indicator : this.state.indicator;\n    let { city, topic } = this.state;\n    let opts = { city, topic, indicator };\n\n    this.update({ ...opts, [name]: value });\n\n    this.setState({\n      [name]: value\n    });\n  };\n\n  handleShape = (e) => {\n    let name = e.target.feature.properties.name;\n    this.setState({\n      nhood: name\n    });\n  };\n\n  handleBar = ({ column }) => {\n    let name = column.name;\n    this.setState({\n      nhood: name\n    });\n  };\n\n  handleRowClick = (name) => {\n    this.setState({\n      nhood: name\n    });\n  };\n\n  handleTableSort = (column) => () => {\n    let isAscending = _.isNull(this.state.isAscending) ? true : !this.state.isAscending;\n    this.setState({\n      sortCol: column,\n      isAscending\n    });\n  };\n\n  render() {\n    let indicators = fetchIndicators(this.state.topic);\n    let displayIndicator = _.find(indicators, { indicator: this.state.indicator }).displayIndicator;\n    let topicMeta = meta[this.state.topic];\n    // all indicators\n    let table = _.chain(this.state.fetch.data)\n      .map((d, i) => _.omit(d, 'geoType', 'town'))\n      .sortBy(this.state.sortCol)\n      .value();\n    let profile = _.find(table, { name: this.state.nhood });\n    // one indicator\n    let indicatorData = this.toIndicator(this.state.fetch, this.state.indicator);\n    let mapData = this.toMap(indicatorData);\n\n    let mapColors = this.makeMapScale(mapData);\n    let barColors = this.makeBarScale(indicatorData);\n\n    // get format of current indicator\n    let indicatorMeta = _.find(topicMeta, { indicator: this.state.indicator });\n    let fmt = indicatorMeta.format;\n    let year = indicatorMeta.year;\n\n    return (\n      <div className=\"App\" role=\"main\">\n        <Grid container stackable>\n          <Grid.Row>\n            <Header as='h1'><Icon name='home' /> Neighborhood Profile: {citiesIdx[this.state.city].title}</Header>\n          </Grid.Row>\n          <Grid.Row>\n            <Intro />\n          </Grid.Row>\n\n          <Grid.Row>\n            <Grid.Column>\n              <Filters\n                topic={this.state.topic}\n                indicator={this.state.indicator}\n                city={this.state.city}\n                meta={meta}\n                indicators={indicators}\n                cities={cities}\n                onChange={this.handleSelect} />\n            </Grid.Column>\n          </Grid.Row>\n\n          <Grid.Row>\n            <Grid.Column width={10}>\n              <Viz\n                indicator={this.state.indicator}\n                displayIndicator={displayIndicator}\n                indicatorData={indicatorData}\n                mapData={mapData}\n                shapes={shapes}\n                city={this.state.city}\n                nhood={this.state.nhood}\n                mapColors={mapColors}\n                barColors={barColors}\n                handleShape={this.handleShape}\n                handleBar={this.handleBar}\n                fmt={fmt}\n                year={year} />\n            </Grid.Column>\n            <Grid.Column width={6}>\n              <Profile\n                data={profile}\n                topicMeta={_.keyBy(topicMeta, 'indicator')}\n                displayTopic={topicMeta[0].displayTopic}\n              />\n            </Grid.Column>\n          </Grid.Row>\n\n          <Grid.Row>\n            <Grid.Column>\n              <DataTable\n                data={this.state.isAscending ? table : table.reverse()}\n                meta={topicMeta}\n                nhood={this.state.nhood}\n                handleClick={this.handleRowClick}\n                handleSort={this.handleTableSort}\n                isAscending={this.state.isAscending}\n                sortCol={this.state.sortCol}\n              />\n            </Grid.Column>\n          </Grid.Row>\n\n          <Grid.Row>\n            <Footer\n              city={this.state.city}\n              data={initData[this.state.city]}\n              sources={sources}\n            />\n          </Grid.Row>\n        </Grid>\n\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Form } from 'semantic-ui-react';\nimport * as _ from 'lodash';\n\nimport '../styles/Filters.css';\n\nconst Filters = (props) => {\n  const topics = _.chain(props.meta)\n    .values()\n    .map(_.toArray)\n    .flattenDeep()\n    .map((d, i) => _.pick(d, [ 'topic', 'displayTopic' ]))\n    .uniqBy('topic')\n    .value()\n    .map((d) => ({\n      key: d.topic,\n      value: d.topic,\n      text: d.displayTopic\n    }));\n\n  const indicators = props.indicators.map((d, i) => ({\n    key: d.indicator,\n    value: d.indicator,\n    text: d.displayIndicator\n  }));\n\n  const cities = props.cities.map((d, i) => ({\n    key: d.id,\n    value: d.id,\n    text: d.title\n  }));\n\n  return (\n    <div className='Filters'>\n      <Form>\n        <Form.Group widths='equal'>\n          <Form.Select id='citySelect'\n            name='city'\n            options={cities}\n            value={props.city}\n            onChange={props.onChange}\n          label='City' />\n          <Form.Select id='topicSelect'\n            name='topic'\n            options={topics}\n            value={props.topic}\n            onChange={props.onChange}\n          label='Topic' />\n          <Form.Select id='indicatorSelect'\n            name='indicator'\n            options={indicators}\n            value={props.indicator}\n            onChange={props.onChange}\n          label='Indicator'/>\n        </Form.Group>\n      </Form>\n    </div>\n  );\n};\n\nexport default Filters;\n","import { format } from 'd3-format';\nimport * as _ from 'lodash';\n\nconst percent = (d) => (\n  format('.0%')(d)\n);\n\nconst comma = (d) => (\n  format(',')(d)\n);\n\nconst sort = (a, b) => {\n  return 1;\n};\n\nconst trunc = (x) => {\n  const maxChar = 20;\n\n  if (x) {\n    return x.length > maxChar ? x.substring(0, maxChar) + '...' : x;\n  }\n\n};\n\n// const cleanVal = (d, fmt) => (\n//   d ? fmt(d) : 'N/A'\n// );\nconst cleanVal = (d, fmt) => {\n  if (_.isNull(d)) {\n    return 'N/A';\n  } else {\n    return fmt ? format(fmt)(d) : d;\n  }\n};\n\nexport { percent, comma, sort, trunc, cleanVal };\n","import React from 'react';\nimport { ResponsiveOrdinalFrame } from 'semiotic';\nimport { sort, trunc, cleanVal } from './utils.js';\n\nimport '../styles/BarChart.css';\n\nconst hilite = '#e350a8';\n\nconst tooltip = (d, fmt) => (\n  <div className='tooltip-content'>\n    <p><strong>{d.name}: </strong>{cleanVal(d.value, fmt)}</p>\n  </div>\n);\n\n// add hilite to color scale\nconst colorNhood = (d, nhood, scale) => (\n  d.name === nhood ? hilite : scale(d.geoType)\n);\n\nconst BarChart = (props) => {\n  let axis = {\n    tickFormat: (d) => cleanVal(d, props.fmt),\n    ticks: 6,\n    padding: 4\n  };\n  return (\n    <div className='BarChart'>\n      <ResponsiveOrdinalFrame\n        data={props.indicatorData}\n        size={[ props.width, props.height ]}\n        responsiveWidth={true}\n        responsiveHeight={false}\n        oAccessor={(d) => trunc(d.name)}\n        rAccessor={'value'}\n        type={'bar'}\n        projection={'horizontal'}\n        rExtent={[ 0, undefined ]}\n        margin={{ left: 120, top: 8, right: 20, bottom: 30 }}\n        axis={axis}\n        sortO={sort}\n        style={(d) => ({\n          opacity: 0.8,\n          color: null,\n          fill: colorNhood(d, props.nhood, props.colorscale)\n        })}\n        oPadding={6}\n        oLabel={true}\n        tooltipContent={(d) => tooltip(d.pieces[0], props.fmt)}\n        hoverAnnotation={true}\n        customClickBehavior={props.handleBar}\n      />\n    </div>\n  )\n};\n\n  export default BarChart;\n","import React from 'react';\nimport { LegendThreshold } from '@vx/legend';\nimport { cleanVal } from './utils.js';\n\nimport '../styles/Legend.css';\n\nconst Legend = (props) => {\n  return (\n    <div className='Legend'>\n      <LegendThreshold\n        scale={props.colorscale}\n        labelFormat={(label) => label ? cleanVal(label, props.format) : ''}\n      />\n    </div>\n  );\n};\n\nexport default Legend;\n","import React from 'react';\nimport * as topojson from 'topojson-client';\nimport { Map, TileLayer, GeoJSON, LayersControl, LayerGroup } from 'react-leaflet';\nimport * as _ from 'lodash';\nimport { cleanVal } from './utils.js';\nimport Legend from './Legend';\n\nimport '../styles/MapContainer.css';\n\nconst { Overlay } = LayersControl;\n\nconst cityStyle = {\n\tfillColor: 'transparent',\n\tcolor: '#333',\n\tweight: 1.5,\n\tpointerEvents: 'none'\n};\n\nexport default class MapContainer extends React.Component {\n\tgetBounds(geo) {\n    let b = topojson.bbox(geo);\n    return [[ b[1], b[0] ], [ b[3], b[2] ]];\n  };\n\n  getStyle = (feature) => {\n    let name = feature.properties.name;\n    let fillColor = this.props.mapData[name] ? this.props.colorscale(this.props.mapData[name].value) : '#ccc';\n    return {\n      fillColor,\n      color: '#555',\n      weight: 0.5,\n      opacity: 1,\n      fillOpacity: 0.75\n    };\n  };\n\n  onEachFeature = (feature, layer) => {\n    let name = feature.properties.name;\n    layer.on('click', this.props.onClick)\n      .on('mouseover', this.addHilite)\n      .on('mouseout', this.removeHilite);\n    layer.bindTooltip(() => {\n\t\t\tlet val = this.props.mapData[name] ? this.props.mapData[name].value : null;\n\t\t\treturn `${name}: ${cleanVal(val, this.props.fmt)}`;\n    }, { direction: 'top', offset: [0, -20], className: 'custom-tip' });\n  };\n\n  addHilite = (e) => {\n    e.target.setStyle({\n      fillOpacity: 0.95,\n      weight: 1\n    });\n  };\n\n  removeHilite = (e) => {\n    e.target.setStyle({\n      fillOpacity: 0.75,\n      weight: 0.5\n    });\n  };\n\n\trender() {\n\t\tlet layers = _.chain(this.props.shapes)\n\t\t\t.map((d, i) => {\n\t\t\t\tlet shp = topojson.feature(d, d.objects.city);\n\t\t\t\t// make mesh & merge to outline towns\n\t\t\t\tlet mesh = topojson.mesh(d, d.objects.city, (a, b) => a.properties.town !== b.properties.town);\n\t\t\t\tlet merge = topojson.merge(d, d.objects.city.geometries);\n\t\t\t\treturn (\n\t\t\t\t\t<Overlay\n\t\t\t\t\t\tname={i}\n\t\t\t\t\t\tkey={`maplayer-${i}`}\n\t\t\t\t\t\tchecked={this.props.city === i}>\n\t\t\t\t\t\t<LayerGroup>\n\t\t\t\t\t\t\t<GeoJSON\n\t\t\t\t\t\t\t\tdata={shp}\n\t\t\t\t\t\t\t\tkey={(feature) => feature.properties.name}\n\t\t\t\t\t\t\t\tonEachFeature={(feature, layer) => this.onEachFeature(feature, layer)}\n\t\t\t\t\t\t\t\tstyle={this.getStyle}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<GeoJSON\n\t\t\t\t\t\t\t\tdata={mesh}\n\t\t\t\t\t\t\t\tstyle={cityStyle}\n\t\t\t\t\t\t\t\tinteractive={false}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<GeoJSON\n\t\t\t\t\t\t\t\tdata={merge}\n\t\t\t\t\t\t\t\tstyle={cityStyle}\n\t\t\t\t\t\t\t\tinteractive={false}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</LayerGroup>\n\t\t\t\t\t</Overlay>\n\t\t\t\t);\n\t\t\t})\n\t\t\t.value();\n\n\t\treturn (\n\t\t\t<div className='MapContainer'>\n        <Map\n\t\t\t\t\tbounds={this.getBounds(this.props.shapes[this.props.city])}\n          zoomSnap={0.25}\n          zoomDelta={0.25}\n          scrollWheelZoom={false}>\n          <TileLayer\n  \t\t\t\t\turl=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.{ext}\"\n  \t\t\t\t\tattribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n  \t\t\t\t\tsubdomains='abcd'\n  \t\t\t\t\tminZoom={11}\n  \t\t\t\t\tmaxZoom={15}\n  \t\t\t\t\text='png'\n  \t\t\t\t\topacity={0.4} />\n\t\t\t\t\t<LayersControl>{layers}</LayersControl>\n\t\t\t\t</Map>\n\n\t\t\t\t<Legend colorscale={this.props.colorscale} format={this.props.fmt} />\n      </div>\n\t\t);\n\t}\n};\n","import React from 'react';\nimport { Header } from 'semantic-ui-react';\nimport { componentFromProp } from 'recompose';\n\nimport BarChart from './BarChart';\nimport MapContainer from './MapContainer';\n\nimport '../styles/VizStage.css';\n\nconst ChartComponent = componentFromProp('component');\n\nconst chartHash = { bar: BarChart, map: MapContainer };\n\nconst VizHeader = ({ displayIndicator, year }) => (\n  <Header as='h2'>{displayIndicator} by neighborhood, {year}</Header>\n);\n\nconst VizStage = (props) => (\n    <div className=\"VizStage\">\n      <VizHeader {...props} />\n      <ChartComponent component={chartHash[props.type]} {...props} />\n    </div>\n);\n\nexport default VizStage;\n","import React from 'react';\nimport { Tab } from 'semantic-ui-react';\n\nimport VizStage from './VizStage';\n\nimport '../styles/Viz.css';\n\nconst width = 500;\nconst height = 420;\n\nconst Viz = (props) => {\n  const panes = [\n    {\n      menuItem: {\n        key: 'pane-map',\n        icon: 'globe',\n        content: 'Show map'\n      },\n      render: () => (\n        <Tab.Pane key='pane-map'>\n          <VizStage type='map'\n            {...props}\n            width={width}\n            height={height}\n            onClick={props.handleShape}\n            colorscale={props.mapColors}\n          />\n      </Tab.Pane>\n      )\n    }, {\n      menuItem: {\n        key: 'pane-bar',\n        icon: 'bar chart',\n        content: 'Show chart'\n      },\n      render: () => (\n        <Tab.Pane key='pane-bar'>\n          <VizStage type='bar'\n            {...props}\n            width={width}\n            height={height}\n            onClick={props.handleBar}\n            colorscale={props.barColors}\n          />\n      </Tab.Pane>\n      )\n    }\n  ];\n\n  return (\n    <div className='Viz'>\n      <Tab menu={{\n        secondary: true,\n        pointing: true,\n        color: 'purple'\n      }}\n      panes={panes} />\n    </div>\n  );\n};\n\nexport default Viz;\n","import React from 'react';\nimport { Header, Table } from 'semantic-ui-react';\nimport * as _ from 'lodash';\nimport { cleanVal } from './utils.js';\n\nimport '../styles/Profile.css';\n\nconst Profile = (props) => {\n  let rows, name;\n  if (props.data) {\n    name = props.data.name;\n    rows = _.chain(props.data)\n      .omit('name')\n      .map((d, i) => {\n        let meta = props.topicMeta[i];\n        let fmt = meta.format;\n        return (\n          <Table.Row key={`profile-${i}`}>\n            <Table.Cell textAlign='left'>{meta.displayIndicator}</Table.Cell>\n            <Table.Cell textAlign='right'>{cleanVal(d, fmt)}</Table.Cell>\n          </Table.Row>\n        );\n      })\n      .value();\n  } else {\n    name = null;\n    rows = (<Table.Row warning><Table.Cell>No data available</Table.Cell></Table.Row>);\n  }\n\n  return (\n    <div className='Profile'>\n      <Header as='h3' attached='top'>{props.displayTopic} - {name}</Header>\n      <Table definition attached compact unstackable size='small'>\n        <Table.Body>{ rows }</Table.Body>\n      </Table>\n    </div>\n  );\n};\n\nexport default Profile;\n","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport * as _ from 'lodash';\nimport { cleanVal } from './utils.js';\n\nimport '../styles/DataTable.css';\n\nconst DataTable = (props) => {\n  let header, rows;\n  if (props.data) {\n    let direction = props.isAscending ? 'ascending' : 'descending';\n\n    // need to handle names differently since not in meta\n    let firstHeader = { indicator: 'name', displayIndicator: 'Name' };\n    let otherHeaders = props.meta.map((d, i) => _.pick(d, [ 'indicator', 'displayIndicator' ]));\n    header = [ firstHeader, ...otherHeaders ].map((d, i) => (\n      <Table.HeaderCell\n        key={`tableheader-${d.indicator}`}\n        onClick={props.handleSort(d.indicator)}\n        sorted={d.indicator === props.sortCol ? direction : null}\n      >\n        {d.displayIndicator}</Table.HeaderCell>\n      )\n    );\n\n    rows = props.data.map((d, i) => (\n      <Table.Row key={`tablerow-${d.name}`}\n        onClick={() => props.handleClick(d.name)}\n        active={props.nhood === d.name}\n        className={props.nhood === d.name ? 'hilite' : null}>\n        { _.map(d, (v, j) => {\n          let align = _.isNumber(v) ? 'right' : 'left';\n          let fmt = j === 'name' ? null : _.find(props.meta, { indicator: j }).format;\n          return (\n            <Table.Cell\n              key={`tablecell-${d.name}-${j}`}\n              textAlign={align}>{cleanVal(v, fmt)}</Table.Cell>\n          );\n        }) }\n      </Table.Row>\n    ));\n  } else {\n    header = null;\n    rows = null;\n  }\n\n  return (\n\t\t<div className='DataTable'>\n      <Table compact fixed unstackable selectable sortable celled size='small'>\n        <Table.Header>\n          <Table.Row>{header}</Table.Row>\n        </Table.Header>\n        <Table.Body>{rows}</Table.Body>\n      </Table>\n    </div>\n\t);\n};\n\nexport default DataTable;\n","import React from 'react';\nimport { Message } from 'semantic-ui-react';\n\nimport '../styles/Intro.css';\n\nconst text = 'Select a city, then a topic and indicator to view either a map or a chart. Clicking a neighborhood on the map, chart, or table will bring up detailed information on that neighborhood. See all neighborhoods in the table below.';\n\nconst Intro = () => (\n\t<div className='Intro'>\n\t\t<Message>\n\t\t\t<p>{text}</p>\n\t\t\t<p>For more information on Connecticut's communities and cities, visit DataHaven's <a href=\"http://www.ctdatahaven.org/communities\">Communities</a> page or <a href=\"http://www.ctdatahaven.org\">main website</a>.</p>\n\t\t</Message>\n\t</div>\n);\n\nexport default Intro;\n","import React from 'react';\n// import { CSVLink } from 'react-csv';\n\nconst Download = (props) => {\n  // console.log(props.data);\n  return (\n    <p>\n      <strong>\n        <a href={`https://github.com/CT-Data-Haven/2017acs/blob/master/to_distribute/${props.city}_acs_basic_neighborhood_2017.csv`}>View this data</a>\n      </strong> or right-click ('Save as...')\n      <strong>\n        <a href={`https://raw.githubusercontent.com/CT-Data-Haven/2017acs/master/to_distribute/${props.city}_acs_basic_neighborhood_2017.csv`}> here </a>\n      </strong> to download\n    </p>\n  );\n};\n\nexport default Download;\n","import React from 'react';\nimport { Image, Segment, List } from 'semantic-ui-react';\nimport Download from './Download';\n\nimport src from '../img/25th-logotype.jpg';\n\nconst text = 'Source: DataHaven analysis (2018) of';\n// const sources = [\n//   'US Census Bureau. American Community Survey 2017 5-year estimates. 2018',\n//   'Centers for Disease Control and Prevention, National Center for Chronic Disease Prevention and Health Promotion, Division of Population Health. 500 Cities Project Data. 2018',\n//   'National Center for Health Statistics. U.S. Small-Area Life Expectancy Estimates Project (USALEEP): Life Expectancy Estimates File for Connecticut, 2010-2015. National Center for Health Statistics. 2018'\n// ]\n\nconst Footer = (props) => (\n  <div className='Footer'>\n    <Segment secondary basic>\n      <p>{text}</p>\n      <List bulleted>\n        {props.sources.map((d, i) => (\n          <List.Item key={`source-${i}`}>\n            <span>{d.source}</span> <a href={d.url}>{d.project}</a> <span>{d.year}</span>\n          </List.Item>\n        ))}\n      </List>\n      <Download {...props} />\n      <Image src={src} size='small' as='a' href='http://www.ctdatahaven.org' alt='DataHaven logo'/>\n    </Segment>\n  </div>\n);\n\nexport default Footer;\n","const routes = [\n  {\n    id: 'new_haven',\n    title: 'New Haven'\n  }, {\n    id: 'bridgeport',\n    title: 'Bridgeport'\n  }, {\n    id: 'hartford',\n    title: 'Hartford / West Hartford'\n  }, {\n    id: 'stamford',\n    title: 'Stamford'\n  }\n];\n\nexport default routes;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// import 'semantic-ui-css/semantic.min.css';\nimport 'semantic-ui/semantic.min.css';\nimport 'leaflet/dist/leaflet.css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}